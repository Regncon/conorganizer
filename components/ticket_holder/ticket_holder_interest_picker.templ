package ticketholder

import (
	"fmt"
	"log/slog"
	"database/sql"
)

templ TicketHolderInterestPicker(eventId string, db *sql.DB, logger *slog.Logger) {
    {{ currentInterest, _ := GetInterestForBillettHolderEventAndPulje(eventId, db, logger) }}
	<style>

    .interest-buttons {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-3x);

        .selected {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }
    }

    </style>
    {{fmt.Println(currentInterest)}}
	<div class="interest-buttons">
        <button
            class={"btn", "btn--interest", addSelectedClass("Veldig interessert", currentInterest)}
            data-on-click={ fmt.Sprintf("@put('/event/api/%s/interest/update/high')", eventId) }
        >
            <span class="emoji">ğŸ¤©</span> Veldig interessert
        </button>
        <button
            class={"btn", "btn--interest" , addSelectedClass("Interessert", currentInterest)}
            data-on-click={ fmt.Sprintf("@put('/event/api/%s/interest/update/medium')", eventId) }
        >
        <span class="emoji">ğŸ™‚</span> Interessert
        </button>
        <button
            class={"btn", "btn--interest" , addSelectedClass("Litt interessert", currentInterest)}
            data-on-click={ fmt.Sprintf("@put('/event/api/%s/interest/update/low')", eventId) }
        >
        <span class="emoji">ğŸ¤¨</span> Litt interessert
        </button>
        <button
            class={"btn", "btn--interest" , addSelectedClass("Ikke interessert", currentInterest)}
            data-on-click={ fmt.Sprintf("@put('/event/api/%s/interest/update/none')", eventId) }
        >
            <span class="emoji">ğŸ˜‘</span> Ikke interessert
        </button>
    </div>
}

func addSelectedClass(selected string, currentInterest string) string {
    if selected == currentInterest {
        return "selected"
    }
    return ""
}
